<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº”å¹´çº§ç§‘å­¦ç´ å…»åˆ†æ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 25px;
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 15px;
        }
        
        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 25px;
            font-size: 16px;
        }
        
        .section {
            margin: 25px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        
        .section-title {
            color: #2c3e50;
            border-left: 4px solid #3498db;
            padding-left: 12px;
            margin-bottom: 15px;
        }
        
        .input-row {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .input-box {
            flex: 1;
            min-width: 80px;
        }
        
        .input-box input {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
            text-align: center;
        }
        
        .input-box label {
            display: block;
            margin-bottom: 5px;
            color: #34495e;
            font-size: 14px;
        }
        
        .essay-input {
            margin: 15px 0;
        }
        
        .essay-input label {
            display: block;
            margin-bottom: 8px;
            color: #34495e;
            font-weight: bold;
        }
        
        .essay-input input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
        }
        
        .btn {
            display: block;
            width: 100%;
            background: #3498db;
            color: white;
            border: none;
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 18px;
            margin-top: 20px;
            transition: background 0.3s;
        }
        
        .btn:hover {
            background: #2980b9;
        }
        
        .btn-secondary {
            background: #7f8c8d;
            width: auto;
            padding: 10px 20px;
            font-size: 16px;
            margin: 10px 0;
        }
        
        .result-section {
            display: none;
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        
        .radar-container {
            width: 100%;
            margin: 20px 0;
        }
        
        .chart-container {
            position: relative;
            height: 400px;
            width: 100%;
        }
        
        .score-cards {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        
        .score-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
            text-align: center;
        }
        
        .score-card h3 {
            font-size: 14px;
            color: #2c3e50;
            margin-bottom: 8px;
        }
        
        .score-value {
            font-size: 24px;
            font-weight: bold;
            color: #3498db;
        }
        
        .suggestion {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            border-left: 4px solid #3498db;
        }
        
        .suggestion h3 {
            color: #2c3e50;
            margin-bottom: 15px;
        }
        
        .suggestion-content {
            line-height: 1.6;
        }
        
        .suggestion-content p {
            margin-bottom: 15px;
            color: #34495e;
        }
        
        .suggestion-content ol {
            padding-left: 25px;
            margin-bottom: 15px;
        }
        
        .suggestion-content li {
            margin-bottom: 10px;
            line-height: 1.5;
        }
        
        .comparison {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid #27ae60;
        }
        
        .comparison h3 {
            color: #2c3e50;
            margin-bottom: 15px;
        }
        
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .comparison-table th, .comparison-table td {
            padding: 12px;
            text-align: center;
            border: 1px solid #ddd;
        }
        
        .comparison-table th {
            background-color: #f2f2f2;
            font-weight: bold;
        }
        
        .comparison-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .better {
            color: #27ae60;
            font-weight: bold;
        }
        
        .worse {
            color: #e74c3c;
            font-weight: bold;
        }
        
        .note {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 10px 15px;
            margin: 15px 0;
            border-radius: 4px;
            font-size: 14px;
            color: #856404;
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 15px;
            }
            
            .score-cards {
                grid-template-columns: 1fr;
            }
            
            .chart-container {
                height: 300px;
            }
            
            .comparison-table {
                font-size: 14px;
            }
            
            .comparison-table th, .comparison-table td {
                padding: 8px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>äº”å¹´çº§ç§‘å­¦ç´ å…»åˆ†æç³»ç»Ÿ</h1>
        <p class="subtitle">è¾“å…¥é”™é¢˜ä¿¡æ¯ï¼Œè·å–ä¸ªæ€§åŒ–å­¦ä¹ å»ºè®®</p>
        
        <div class="note">
            <strong>è¯´æ˜ï¼š</strong> é€‰æ‹©é¢˜æ¯é¢˜2åˆ†ï¼Œéé€‰æ‹©é¢˜æ‰£åˆ†è¯·è¾“å…¥æ•´æ•°
        </div>
        
        <div class="section">
            <h2 class="section-title">é€‰æ‹©é¢˜é”™è¯¯é¢˜å· (æ¯é¢˜2åˆ†)</h2>
            <p style="color: #666; margin-bottom: 15px;">è¯·è¾“å…¥é”™è¯¯çš„é¢˜å·ï¼ˆæ¯æ ¼ä¸€ä¸ªé¢˜å·ï¼‰ï¼š</p>
            
            <div class="input-row" id="choice-container">
                <!-- é€‰æ‹©é¢˜è¾“å…¥æ¡†ç”±JSç”Ÿæˆ -->
            </div>
            
            <button class="btn btn-secondary" onclick="addChoiceInputs()">æ·»åŠ æ›´å¤šè¾“å…¥æ¡†</button>
            
            <div class="essay-input">
                <label>å…¶ä»–é”™è¯¯é¢˜å· (ç”¨é€—å·åˆ†éš”)ï¼š</label>
                <input type="text" id="extra-choices" placeholder="ä¾‹å¦‚ï¼š12,15,18">
            </div>
        </div>
        
        <div class="section">
            <h2 class="section-title">éé€‰æ‹©é¢˜æ‰£åˆ†æ•°</h2>
            
            <div class="essay-input">
                <label>31é¢˜æ‰£åˆ† (æ€»åˆ†16åˆ†)ï¼š</label>
                <input type="number" id="essay31" min="0" max="16" step="1" placeholder="è¾“å…¥æ•´æ•°æ‰£åˆ†ï¼Œå¦‚ï¼š2">
            </div>
            
            <div class="essay-input">
                <label>32é¢˜æ‰£åˆ† (æ€»åˆ†8åˆ†)ï¼š</label>
                <input type="number" id="essay32" min="0" max="8" step="1" placeholder="è¾“å…¥æ•´æ•°æ‰£åˆ†ï¼Œå¦‚ï¼š1">
            </div>
            
            <div class="essay-input">
                <label>33é¢˜æ‰£åˆ† (æ€»åˆ†8åˆ†)ï¼š</label>
                <input type="number" id="essay33" min="0" max="8" step="1" placeholder="è¾“å…¥æ•´æ•°æ‰£åˆ†ï¼Œå¦‚ï¼š2">
            </div>
            
            <div class="essay-input">
                <label>34é¢˜æ‰£åˆ† (æ€»åˆ†8åˆ†)ï¼š</label>
                <input type="number" id="essay34" min="0" max="8" step="1" placeholder="è¾“å…¥æ•´æ•°æ‰£åˆ†ï¼Œå¦‚ï¼š0">
            </div>
        </div>
        
        <button class="btn" onclick="analyze()">ç”Ÿæˆåˆ†ææŠ¥å‘Š</button>
        
        <div class="result-section" id="result-section">
            <h2 class="section-title">åˆ†æç»“æœ</h2>
            
            <div class="score-cards" id="score-cards">
                <!-- å¾—åˆ†ç‡å¡ç‰‡ç”±JSç”Ÿæˆ -->
            </div>
            
            <div class="radar-container">
                <h3 class="section-title">ç§‘å­¦ç´ å…»é›·è¾¾å›¾</h3>
                <div class="chart-container">
                    <canvas id="radarChart"></canvas>
                </div>
            </div>
            
            <div class="comparison" id="comparison-table">
                <!-- å¯¹æ¯”è¡¨æ ¼ç”±JSç”Ÿæˆ -->
            </div>
            
            <div class="suggestion" id="suggestion">
                <!-- å­¦ä¹ å»ºè®®ç”±JSç”Ÿæˆ -->
            </div>
        </div>
    </div>

    <script>
        // äº”å¹´çº§å­¦å¹´å¹³å‡å¾—åˆ†ç‡
        const YEAR_AVERAGE = {
            'ç§‘å­¦è§‚å¿µ': 89.62,
            'ç§‘å­¦æ€ç»´': 80.05,
            'æ¢ç©¶å®è·µ': 85.83,
            'æ€åº¦è´£ä»»': 97.36
        };
        
        // äº”å¹´çº§é¢˜ç›®åˆ†å€¼é…ç½®
        const QUESTION_CONFIG = {
            'ç§‘å­¦è§‚å¿µ': {
                total: 18,
                choices: [5, 6, 8, 10, 14, 15, 16, 25, 27],
                essays: []
            },
            'ç§‘å­¦æ€ç»´': {
                total: 46,
                choices: [1, 3, 4, 7, 11, 12, 13, 17, 18, 19, 20, 23, 28, 29],
                essays: [{id: 31, score: 16}]
            },
            'æ¢ç©¶å®è·µ': {
                total: 34,
                choices: [2, 9, 21, 24, 26],
                essays: [
                    {id: 32, score: 8},
                    {id: 33, score: 8},
                    {id: 34, score: 8}
                ]
            },
            'æ€åº¦è´£ä»»': {
                total: 2,
                choices: [22],
                essays: []
            }
        };
        
        // å®Œæ•´çš„å­¦ä¹ å»ºè®®
        const SUGGESTIONS = {
            'ç§‘å­¦è§‚å¿µ': {
                title: "ç§‘å­¦è§‚å¿µæ˜¯ç§‘å­¦å­¦ä¹ çš„åŸºç¡€ï¼Œæ ¸å¿ƒé—®é¢˜å¤šä¸ºæ¦‚å¿µæŒæ¡ä¸æ‰å®ã€çŸ¥è¯†ç‚¹è®°å¿†é›¶æ•£ï¼Œæœªå½¢æˆç³»ç»Ÿè®¤çŸ¥ã€‚æˆ‘ä»¬ç»™æ‚¨çš„å»ºè®®å¦‚ä¸‹ï¼š",
                tips: [
                    "æ—¥å¸¸å¤šåšé’ˆå¯¹æ€§æé—®ï¼Œæ¯”å¦‚é¥­åã€ç¡å‰ç”¨ 5-10 åˆ†é’Ÿï¼Œéšæœºæé—®å­©å­è¯¾å ‚å­¦è¿‡çš„ç§‘å­¦æ¦‚å¿µï¼ˆå¦‚ 'æ¤ç‰©çš„å…‰åˆä½œç”¨éœ€è¦å“ªäº›æ¡ä»¶ï¼Ÿ'ã€'ä»€ä¹ˆæ˜¯æµ®åŠ›ï¼Ÿ'ï¼‰ï¼Œå€’é€¼å­©å­ä¸»åŠ¨å›é¡¾ã€æ¢³ç†çŸ¥è¯†ç‚¹ï¼Œé¿å…è¢«åŠ¨è®°èƒŒã€‚",
                    "å¸®å­©å­æ­å»ºç§‘å­¦æ¦‚å¿µä½“ç³»ï¼Œç”¨ç®€å•çš„æ€ç»´å¯¼å›¾ã€çŸ¥è¯†æ¸…å•ï¼Œè®©å­©å­æŠŠé›¶æ•£çš„çŸ¥è¯†ç‚¹ä¸²è”èµ·æ¥ï¼ˆå¦‚æŠŠ 'åŠ¨ç‰©çš„åˆ†ç±»''ä¸åŒåŠ¨ç‰©çš„ç”Ÿæ´»ä¹ æ€§' æ•´åˆæ¢³ç†ï¼‰ï¼Œæ¯å‘¨èŠ± 1 æ¬¡æ—¶é—´å’Œå­©å­ä¸€èµ·å¤ç›˜å·©å›ºã€‚",
                    "è¥é€ è½»é‡çš„å­¦ä¹ ç´§è¿«æ„Ÿï¼Œçº¦å®šæ¯æ—¥ 'ç§‘å­¦å°æ‰“å¡'ï¼Œè®©å­©å­ä¸»åŠ¨å¤è¿°å½“å¤©å­¦çš„ 1-2 ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œè‹¥è¡¨è¿°ä¸æ¸…æ™°ï¼Œå¼•å¯¼å­©å­ç¿»ä¹¦é‡æ–°å­¦ä¹ ï¼ŒåŸ¹å…»ä¸»åŠ¨æŸ¥æ¼è¡¥ç¼ºçš„ä¹ æƒ¯ã€‚"
                ]
            },
            'ç§‘å­¦æ€ç»´': {
                title: "ç§‘å­¦æ€ç»´è–„å¼±ä¸»è¦è¡¨ç°ä¸ºä¸ä¼šç”¨å­¦è¿‡çš„çŸ¥è¯†åˆ†æã€è§£å†³é—®é¢˜ï¼Œåšé¢˜æ—¶æ€è·¯æ··ä¹±ï¼Œæ˜“ç”Ÿæ¬ç¡¬å¥—ã€‚æˆ‘ä»¬å»ºè®®æ‚¨ä¾§é‡å¼•å¯¼å­©å­è¡¨è¾¾æ€è·¯ã€å¼ºåŒ–çŸ¥è¯†åº”ç”¨ï¼š",
                tips: [
                    "è¿›è¡Œå°‘é‡é«˜é¢‘çš„æ€ç»´ç»ƒä¹ ï¼Œæ¯å¤©è®©å­©å­åš 3-5 é“ç§‘å­¦é€‰æ‹© / éé€‰æ‹©é¢˜ï¼Œä¸è¿½æ±‚é€Ÿåº¦ä½†è¦æ±‚å­©å­è¯´æ¸…è§£é¢˜æ€è·¯ï¼Œæ¯”å¦‚è®©å­©å­è®²ä¸€è®² 'è¿™é“é¢˜ç”¨åˆ°äº†å“ªä¸ªç§‘å­¦çŸ¥è¯†ç‚¹ï¼Ÿä½ æ˜¯æ€ä¹ˆåˆ¤æ–­çš„ï¼Ÿä½ æ€ä¹ˆçŸ¥é“å…¶ä»–ç­”æ¡ˆä¸å¯¹ï¼Ÿè¿™é¢˜è¿˜èƒ½æ€ä¹ˆè€ƒï¼Ÿ'ï¼Œé¿å…åªå¯¹ç­”æ¡ˆã€‚",
                    "ç”Ÿæ´»ä¸­æ¸—é€ç§‘å­¦æ€ç»´ï¼Œé‡åˆ°æ—¥å¸¸ç§‘å­¦ç°è±¡ï¼ˆå¦‚ 'æ¯å­é‡Œçš„æ°´ä¸ºä»€ä¹ˆä¼šæ´’å‡ºæ¥ï¼Ÿ''å†¬å¤©çª—æˆ·ä¸Šä¸ºä»€ä¹ˆä¼šæœ‰å“ˆæ°”ï¼Ÿ'ï¼‰ï¼Œä¸»åŠ¨å¼•å¯¼å­©å­ç”¨è¯¾å ‚å­¦è¿‡çš„çŸ¥è¯†è§£é‡Šï¼Œé”»ç‚¼ 'ç”¨çŸ¥è¯†æ€è€ƒé—®é¢˜' çš„èƒ½åŠ›ï¼Œè®©å­©å­æ˜ç™½ç§‘å­¦æ€ç»´ä¸ä»…èƒ½ç”¨åœ¨åšé¢˜ä¸Šï¼Œä¹Ÿèƒ½è§£å†³ç”Ÿæ´»é—®é¢˜ã€‚",
                    "é’ˆå¯¹å­©å­çš„é”™é¢˜ï¼Œé‡ç‚¹åˆ†æ 'æ€è·¯é—®é¢˜'ï¼Œè€Œéå•çº¯è®¢æ­£ç­”æ¡ˆã€‚æ¯”å¦‚å­©å­é”™é¢˜æ˜¯å› ä¸ºæ²¡æ‰¾åˆ°å¯¹åº”çš„ç§‘å­¦çŸ¥è¯†ï¼Œå°±å’Œå­©å­ä¸€èµ·å›é¡¾çŸ¥è¯†ç‚¹ï¼Œå†è®©å­©å­ç”¨æ­£ç¡®çš„æ€è·¯é‡æ–°åšä¸€éï¼Œå¼ºåŒ–çŸ¥è¯†ä¸è§£é¢˜çš„å…³è”ã€‚"
                ]
            },
            'æ¢ç©¶å®è·µ': {
                title: "æ¢ç©¶å®è·µè–„å¼±å¤šæ˜¯å› ä¸ºå­©å­åšå®éªŒæ—¶æµäºå½¢å¼ï¼Œä¸å…³æ³¨ç»†èŠ‚ã€ç¼ºä¹ä¸»åŠ¨æ€è€ƒï¼Œå¯¹å®éªŒåŸç†å’Œè¿‡ç¨‹çš„ç†è§£æµ®äºè¡¨é¢ã€‚å»ºè®®æ‚¨å¯é€šè¿‡å®¶åº­ç®€æ˜“å®éªŒï¼ŒåŸ¹å…»å­©å­çš„æ¢ç©¶ç»†è‡´æ€§ï¼š",
                tips: [
                    "é™ªå­©å­åšç”Ÿæ´»åŒ–ç®€æ˜“ç§‘å­¦å®éªŒï¼ˆåˆ©ç”¨å®¶é‡Œçš„æ°´æ¯ã€ç­·å­ã€é£Ÿç›ã€èœ¡çƒ›ç­‰ææ–™ï¼‰ï¼Œåˆ©ç”¨å®¶é‡Œç°æœ‰æ¡ä»¶é‡å¤è¿›è¡Œè¯¾å ‚çœ‹è¿‡ã€åšè¿‡çš„å®éªŒï¼Œæ”¾æ…¢å®éªŒèŠ‚å¥ï¼Œè®©å­©å­è‡ªå·±è®¾è®¡å®éªŒæ­¥éª¤ã€åŠ¨æ‰‹æ“ä½œï¼Œå®¶é•¿åªåšå¼•å¯¼ï¼Œä¸åŒ…åŠä»£æ›¿ã€‚",
                    "è¦æ±‚å­©å­å…³æ³¨å®éªŒç»†èŠ‚å¹¶è®°å½•ï¼Œè®©å­©å­å‡†å¤‡ä¸€ä¸ªå®éªŒå°æœ¬å­ï¼Œè®°å½•å®éªŒçš„ææ–™ã€æ­¥éª¤ã€è§‚å¯Ÿåˆ°çš„ç°è±¡ï¼ˆå“ªæ€•æ˜¯ç»†å¾®çš„å˜åŒ–ï¼‰ï¼Œç”šè‡³è®©å­©å­æ€è€ƒ 'å¦‚æœæ”¹å˜ä¸€ä¸ªå®éªŒæ¡ä»¶ï¼Œç»“æœä¼šä¸ä¸€æ ·å—ï¼Ÿ'ï¼Œæ¯”å¦‚ 'æ…æ‹Œå’Œä¸æ…æ‹Œï¼Œç›æº¶è§£çš„é€Ÿåº¦å·®å¤šå°‘ï¼Ÿ'ï¼ŒåŸ¹å…»ä¸»åŠ¨æ¢ç©¶çš„æ€ç»´ã€‚",
                    "é¼“åŠ±å­©å­åæ€å®éªŒä¸­çš„é—®é¢˜ï¼Œå¦‚æœå®éªŒç»“æœå’Œé¢„æœŸä¸ä¸€æ ·ï¼Œå’Œå­©å­ä¸€èµ·åˆ†æåŸå› ï¼ˆå¦‚ 'æ˜¯ä¸æ˜¯ææ–™ç”¨é‡ä¸å¯¹ï¼Ÿ''æ˜¯ä¸æ˜¯æ“ä½œæ­¥éª¤å‡ºé”™äº†ï¼Ÿ'ï¼‰ï¼Œè®©å­©å­æ˜ç™½å®éªŒçš„æ ¸å¿ƒæ˜¯ 'è§‚å¯Ÿ - æ€è€ƒ - éªŒè¯'ï¼Œè€Œéå•çº¯å®ŒæˆåŠ¨æ‰‹æ“ä½œã€‚"
                ]
            },
            'æ€åº¦è´£ä»»': {
                title: "æ€åº¦è´£ä»»è–„å¼±çš„æ ¸å¿ƒæ˜¯å­¦ä¹ ä¸­é©¬è™ã€ç²—å¿ƒã€ä¸è®¤çœŸï¼Œå¯¹ä½œä¸šå’Œå­¦ä¹ ç¼ºä¹æ•¬ç•å¿ƒï¼Œè¿™ç±»é—®é¢˜å¹¶éçŸ¥è¯†é—®é¢˜ï¼Œå»ºè®®æ‚¨ä¸¥æ ¼åŸ¹å…»å­©å­çš„è®¤çœŸä¹ æƒ¯ï¼š",
                tips: [
                    "å¯¹å­©å­çš„ç§‘å­¦ä½œä¸šä¸¥æ ¼è¦æ±‚ï¼Œç»ä¸æ•·è¡ï¼Œè¦æ±‚å­©å­å®¡é¢˜ä»”ç»†ã€ä¹¦å†™å·¥æ•´ã€æ­¥éª¤å®Œæ•´ï¼Œåšå®Œåå¿…é¡»è‡ªå·±å…ˆæ£€æŸ¥ï¼Œå®¶é•¿å†å¤æ ¸ï¼Œè‹¥å‘ç°å› é©¬è™ã€ç²—å¿ƒçŠ¯çš„é”™è¯¯ï¼Œä¸è½»æ˜“æ”¾è¿‡ï¼Œè®©å­©å­é‡æ–°è®¢æ­£å¹¶æ ‡æ³¨ 'é”™è¯¯åŸå› ï¼ˆé©¬è™ / ç²—å¿ƒï¼‰'ï¼Œå¼ºåŒ–å­©å­çš„è´£ä»»æ„è¯†ã€‚",
                    "å»ºç«‹é”™é¢˜æº¯æºè§„åˆ™ï¼ŒæŠŠå­©å­çš„ç§‘å­¦é”™é¢˜åˆ†ä¸º 'ä¸ä¼šåšçš„é¢˜' å’Œ 'ç²—å¿ƒåšé”™çš„é¢˜'ï¼Œé’ˆå¯¹ç²—å¿ƒé”™é¢˜ï¼Œè®©å­©å­åˆ¶å®šç®€å•çš„è§„é¿æ–¹æ³•ï¼ˆå¦‚ 'å®¡é¢˜æ—¶åœˆç”»å…³é”®è¯''è®¡ç®—æ—¶åå¤æ ¸å¯¹'ï¼‰ï¼Œå¹¶å®šæœŸå¤ç›˜ï¼Œå‡å°‘åŒç±»é”™è¯¯ã€‚",
                    "ä»å°äº‹åŸ¹å…»è®¤çœŸçš„æ€åº¦ï¼Œæ¯”å¦‚è®©å­©å­è‡ªå·±æ•´ç†ç§‘å­¦è¯¾æœ¬ã€å®éªŒå™¨æï¼Œä¹¦å†™å®éªŒè®°å½•æ—¶è¦æ±‚å­—è¿¹å·¥æ•´ã€å†…å®¹å®Œæ•´ï¼Œè®©å­©å­æ˜ç™½ 'è®¤çœŸ' æ˜¯ä¸€ç§é€šç”¨çš„å­¦ä¹ æ€åº¦ï¼Œä¸ä»…è¦ä½“ç°åœ¨ä½œä¸šå’Œè€ƒè¯•ä¸­ï¼Œæ›´è¦ä½“ç°åœ¨æ—¥å¸¸çš„æ¯ä¸€ä¸ªå­¦ä¹ ç¯èŠ‚é‡Œã€‚"
                ]
            }
        };
        
        // å…¨éƒ¨100%æ—¶çš„é€šç”¨å»ºè®®
        const ALL_PERFECT_SUGGESTIONS = [
            "ç»§ç»­ä¿æŒè‰¯å¥½çš„å­¦ä¹ ä¹ æƒ¯ï¼Œå®šæœŸå¤ä¹ ç§‘å­¦çŸ¥è¯†",
            "é¼“åŠ±å­©å­å‚ä¸æ›´å¤šçš„ç§‘å­¦å®è·µæ´»åŠ¨ï¼Œæ‹“å±•ç§‘å­¦è§†é‡",
            "åŸ¹å…»å­©å­çš„ç§‘å­¦æ¢ç©¶å…´è¶£ï¼Œé˜…è¯»ç§‘æ™®ä¹¦ç±æˆ–è§‚çœ‹ç§‘å­¦èŠ‚ç›®",
            "é¼“åŠ±å­©å­åˆ†äº«å­¦åˆ°çš„ç§‘å­¦çŸ¥è¯†ï¼Œå¢å¼ºè¡¨è¾¾å’Œåº”ç”¨èƒ½åŠ›"
        ];
        
        let radarChart = null;
        let choiceInputCount = 0;
        
        // åˆå§‹åŒ–é€‰æ‹©é¢˜è¾“å…¥æ¡†
        function initChoiceInputs() {
            const container = document.getElementById('choice-container');
            choiceInputCount = 0;
            
            // åˆ›å»ºåˆå§‹10ä¸ªè¾“å…¥æ¡†
            for (let i = 1; i <= 10; i++) {
                addChoiceInput();
            }
        }
        
        // æ·»åŠ é€‰æ‹©é¢˜è¾“å…¥æ¡†
        function addChoiceInput() {
            choiceInputCount++;
            const container = document.getElementById('choice-container');
            
            const div = document.createElement('div');
            div.className = 'input-box';
            div.id = `choice-box-${choiceInputCount}`;
            
            const label = document.createElement('label');
            label.textContent = `é¢˜å·${choiceInputCount}`;
            
            const input = document.createElement('input');
            input.type = 'text';
            input.id = `choice${choiceInputCount}`;
            input.placeholder = 'é¢˜å·';
            input.maxLength = 2;
            
            div.appendChild(label);
            div.appendChild(input);
            container.appendChild(div);
        }
        
        // æ·»åŠ æ›´å¤šé€‰æ‹©é¢˜è¾“å…¥æ¡†
        function addChoiceInputs() {
            for (let i = 1; i <= 10; i++) {
                addChoiceInput();
            }
        }
        
        // è®¡ç®—å„ç»´åº¦å¾—åˆ†ç‡
        function calculateScores() {
            // æ”¶é›†é”™è¯¯é€‰æ‹©é¢˜
            const wrongChoices = [];
            for (let i = 1; i <= choiceInputCount; i++) {
                const input = document.getElementById(`choice${i}`);
                if (input && input.value.trim()) {
                    const value = parseInt(input.value.trim());
                    if (!isNaN(value)) {
                        wrongChoices.push(value);
                    }
                }
            }
            
            // é¢å¤–çš„é”™è¯¯é¢˜å·
            const extraInput = document.getElementById('extra-choices').value;
            if (extraInput) {
                extraInput.split(',').forEach(item => {
                    const num = parseInt(item.trim());
                    if (!isNaN(num)) wrongChoices.push(num);
                });
            }
            
            // æ”¶é›†éé€‰æ‹©é¢˜æ‰£åˆ†
            const essayDeductions = {};
            
            // 31é¢˜æ‰£åˆ†
            const essay31Input = document.getElementById('essay31');
            const essay31Value = parseInt(essay31Input.value);
            if (!isNaN(essay31Value) && essay31Value >= 0) {
                essayDeductions[31] = essay31Value;
            }
            
            // 32é¢˜æ‰£åˆ†
            const essay32Input = document.getElementById('essay32');
            const essay32Value = parseInt(essay32Input.value);
            if (!isNaN(essay32Value) && essay32Value >= 0) {
                essayDeductions[32] = essay32Value;
            }
            
            // 33é¢˜æ‰£åˆ†
            const essay33Input = document.getElementById('essay33');
            const essay33Value = parseInt(essay33Input.value);
            if (!isNaN(essay33Value) && essay33Value >= 0) {
                essayDeductions[33] = essay33Value;
            }
            
            // 34é¢˜æ‰£åˆ†
            const essay34Input = document.getElementById('essay34');
            const essay34Value = parseInt(essay34Input.value);
            if (!isNaN(essay34Value) && essay34Value >= 0) {
                essayDeductions[34] = essay34Value;
            }
            
            // è®¡ç®—å„ç»´åº¦å¾—åˆ†ç‡
            const scores = {};
            
            for (const [dimension, config] of Object.entries(QUESTION_CONFIG)) {
                let totalScore = config.total;
                
                // æ‰£é™¤é€‰æ‹©é¢˜åˆ†æ•°
                config.choices.forEach(qNum => {
                    if (wrongChoices.includes(qNum)) {
                        totalScore -= 2;
                    }
                });
                
                // æ‰£é™¤éé€‰æ‹©é¢˜åˆ†æ•°
                config.essays.forEach(essay => {
                    if (essayDeductions[essay.id]) {
                        totalScore -= essayDeductions[essay.id];
                    }
                });
                
                // è®¡ç®—å¾—åˆ†ç‡
                const scoreRate = (totalScore / config.total) * 100;
                scores[dimension] = Math.max(0, Math.min(100, parseFloat(scoreRate.toFixed(2))));
            }
            
            return scores;
        }
        
        // æ£€æŸ¥æ˜¯å¦æ‰€æœ‰ç»´åº¦éƒ½æ˜¯100%
        function isAllPerfect(scores) {
            return Object.values(scores).every(score => score === 100);
        }
        
        // è¯†åˆ«æœ€è–„å¼±ç¯èŠ‚ï¼ˆæ’é™¤100%çš„ç»´åº¦ï¼‰
        function findWeakest(scores) {
            // æ’é™¤100%çš„ç»´åº¦
            const nonPerfectDimensions = [];
            for (const [dim, score] of Object.entries(scores)) {
                if (score < 100) {
                    nonPerfectDimensions.push({dim, score});
                }
            }
            
            // å¦‚æœæ²¡æœ‰é100%çš„ç»´åº¦ï¼Œè¿”å›ç©ºæ•°ç»„
            if (nonPerfectDimensions.length === 0) {
                return [];
            }
            
            // åœ¨é100%çš„ç»´åº¦ä¸­ï¼Œæ‰¾å‡ºä½äºå¹³å‡åˆ†çš„ç»´åº¦
            const belowAverage = [];
            for (const {dim, score} of nonPerfectDimensions) {
                if (score < YEAR_AVERAGE[dim]) {
                    belowAverage.push({dim, score});
                }
            }
            
            if (belowAverage.length > 0) {
                // å–æœ€ä½åˆ†
                belowAverage.sort((a, b) => a.score - b.score);
                const weakest = [belowAverage[0].dim];
                
                // æ£€æŸ¥æ˜¯å¦æœ‰å¹¶åˆ—æœ€ä½
                for (let i = 1; i < belowAverage.length; i++) {
                    if (belowAverage[i].score === belowAverage[0].score) {
                        weakest.push(belowAverage[i].dim);
                    }
                }
                return weakest;
            } else {
                // éƒ½é«˜äºæˆ–ç­‰äºå¹³å‡åˆ†ï¼Œæ‰¾å·®è·æœ€å°çš„
                const gaps = [];
                for (const {dim, score} of nonPerfectDimensions) {
                    gaps.push({dim, gap: score - YEAR_AVERAGE[dim]});
                }
                
                gaps.sort((a, b) => a.gap - b.gap);
                const weakest = [gaps[0].dim];
                
                // æ£€æŸ¥æ˜¯å¦æœ‰å¹¶åˆ—æœ€å°å·®è·
                for (let i = 1; i < gaps.length; i++) {
                    if (gaps[i].gap === gaps[0].gap) {
                        weakest.push(gaps[i].dim);
                    }
                }
                return weakest;
            }
        }
        
        // ç»˜åˆ¶é›·è¾¾å›¾
        function drawRadarChart(scores) {
            const ctx = document.getElementById('radarChart').getContext('2d');
            
            // å¦‚æœå·²ç»æœ‰å›¾è¡¨ï¼Œå…ˆé”€æ¯
            if (radarChart) {
                radarChart.destroy();
            }
            
            const dimensions = Object.keys(scores);
            const studentScores = Object.values(scores);
            const averageScores = dimensions.map(dim => YEAR_AVERAGE[dim]);
            
            radarChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: dimensions,
                    datasets: [
                        {
                            label: 'å­¦ç”Ÿå¾—åˆ†ç‡',
                            data: studentScores,
                            backgroundColor: 'rgba(52, 152, 219, 0.2)',
                            borderColor: 'rgba(52, 152, 219, 1)',
                            pointBackgroundColor: 'rgba(52, 152, 219, 1)',
                            pointBorderColor: '#fff',
                            pointHoverBackgroundColor: '#fff',
                            pointHoverBorderColor: 'rgba(52, 152, 219, 1)',
                            borderWidth: 2,
                            pointRadius: 4
                        },
                        {
                            label: 'å¹´çº§å¹³å‡å¾—åˆ†ç‡',
                            data: averageScores,
                            backgroundColor: 'rgba(231, 76, 60, 0.2)',
                            borderColor: 'rgba(231, 76, 60, 1)',
                            pointBackgroundColor: 'rgba(231, 76, 60, 1)',
                            pointBorderColor: '#fff',
                            pointHoverBackgroundColor: '#fff',
                            pointHoverBorderColor: 'rgba(231, 76, 60, 1)',
                            borderWidth: 2,
                            pointRadius: 4,
                            borderDash: [5, 5]
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: {
                                display: true,
                                color: 'rgba(0, 0, 0, 0.1)'
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            },
                            pointLabels: {
                                font: {
                                    size: 14,
                                    family: "'Microsoft YaHei', Arial, sans-serif"
                                },
                                color: '#2c3e50'
                            },
                            ticks: {
                                backdropColor: 'transparent',
                                font: {
                                    size: 12
                                },
                                maxTicksLimit: 5,
                                callback: function(value) {
                                    return value + '%';
                                }
                            },
                            suggestedMin: 0,
                            suggestedMax: 100
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                font: {
                                    size: 14,
                                    family: "'Microsoft YaHei', Arial, sans-serif"
                                },
                                padding: 20
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': ' + context.raw.toFixed(2) + '%';
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // æ˜¾ç¤ºåˆ†æç»“æœ
        function displayResults(scores) {
            // æ˜¾ç¤ºç»“æœåŒºåŸŸ
            document.getElementById('result-section').style.display = 'block';
            
            // æ£€æŸ¥æ˜¯å¦æ‰€æœ‰ç»´åº¦éƒ½æ˜¯100%
            const allPerfect = isAllPerfect(scores);
            
            // å¦‚æœä¸æ˜¯å…¨100%ï¼Œæ‰¾å‡ºè–„å¼±ç¯èŠ‚
            const weakest = allPerfect ? [] : findWeakest(scores);
            
            // ç”Ÿæˆå¾—åˆ†ç‡å¡ç‰‡
            const scoreCards = document.getElementById('score-cards');
            scoreCards.innerHTML = '';
            
            for (const [dimension, score] of Object.entries(scores)) {
                const average = YEAR_AVERAGE[dimension];
                const diff = score - average;
                const diffText = diff >= 0 ? `+${diff.toFixed(2)}` : diff.toFixed(2);
                
                const card = document.createElement('div');
                card.className = 'score-card';
                
                let indicator = '';
                if (!allPerfect && weakest.includes(dimension)) {
                    indicator = ' âš ï¸';
                }
                
                // å¦‚æœæ˜¯100%ï¼Œç”¨ç‰¹æ®Šæ ·å¼
                if (score === 100) {
                    card.style.borderLeft = '4px solid #27ae60';
                }
                
                card.innerHTML = `
                    <h3>${dimension}${indicator}</h3>
                    <div class="score-value" style="${score === 100 ? 'color: #27ae60;' : ''}">
                        ${score.toFixed(1)}%
                        ${score === 100 ? 'ğŸ‰' : ''}
                    </div>
                    <div style="font-size: 12px; margin-top: 5px; color: ${diff >= 0 ? '#27ae60' : '#e74c3c'}">
                        å¹´çº§å¹³å‡: ${average}% (${diffText}%)
                    </div>
                `;
                
                scoreCards.appendChild(card);
            }
            
            // ç»˜åˆ¶é›·è¾¾å›¾
            drawRadarChart(scores);
            
            // ç”Ÿæˆå¯¹æ¯”è¡¨æ ¼
            const comparisonDiv = document.getElementById('comparison-table');
            comparisonDiv.innerHTML = '';
            
            const comparisonTitle = document.createElement('h3');
            comparisonTitle.textContent = 'ğŸ“Š ä¸å¹´çº§å¹³å‡æ°´å¹³å¯¹æ¯”';
            comparisonDiv.appendChild(comparisonTitle);
            
            const table = document.createElement('table');
            table.className = 'comparison-table';
            table.innerHTML = `
                <thead>
                    <tr>
                        <th>ç§‘å­¦ç´ å…»ç»´åº¦</th>
                        <th>å­¦ç”Ÿå¾—åˆ†ç‡</th>
                        <th>å¹´çº§å¹³å‡</th>
                        <th>å·®è·</th>
                        <th>è¡¨ç°</th>
                    </tr>
                </thead>
                <tbody>
                    ${Object.entries(scores).map(([dim, score]) => {
                        const average = YEAR_AVERAGE[dim];
                        const diff = score - average;
                        const diffText = diff >= 0 ? `+${diff.toFixed(2)}%` : `${diff.toFixed(2)}%`;
                        const performance = diff >= 0 ? 'é«˜äºå¹³å‡' : 'ä½äºå¹³å‡';
                        const performanceClass = diff >= 0 ? 'better' : 'worse';
                        
                        return `
                            <tr>
                                <td>${dim}${score === 100 ? ' ğŸ‰' : ''}</td>
                                <td style="${score === 100 ? 'font-weight: bold; color: #27ae60;' : ''}">${score.toFixed(2)}%</td>
                                <td>${average}%</td>
                                <td class="${performanceClass}">${diffText}</td>
                                <td class="${performanceClass}">${performance}</td>
                            </tr>
                        `;
                    }).join('')}
                </tbody>
            `;
            comparisonDiv.appendChild(table);
            
            // ç”Ÿæˆå­¦ä¹ å»ºè®®
            const suggestionDiv = document.getElementById('suggestion');
            suggestionDiv.innerHTML = '';
            
            if (allPerfect) {
                // å…¨éƒ¨100%æ—¶çš„å»ºè®®
                suggestionDiv.innerHTML = `
                    <h3>ğŸ‰ å®Œç¾è¡¨ç°ï¼æ‰€æœ‰ç»´åº¦éƒ½è¾¾åˆ°äº†100%ï¼</h3>
                    <div class="suggestion-content">
                        <p>æ‚¨çš„å­©å­åœ¨æ‰€æœ‰ç»´åº¦éƒ½è¾¾åˆ°äº†æ»¡åˆ†ï¼Œè¡¨ç°éå¸¸å‡ºè‰²ï¼ä»¥ä¸‹æ˜¯ä¸€äº›è¿›ä¸€æ­¥æå‡çš„å»ºè®®ï¼š</p>
                        <ol>
                            ${ALL_PERFECT_SUGGESTIONS.map(tip => `<li>${tip}</li>`).join('')}
                        </ol>
                    </div>
                `;
            } else if (weakest.length > 0) {
                // æœ‰è–„å¼±ç¯èŠ‚
                const title = document.createElement('h3');
                title.textContent = `ğŸ“‹ ä¸ªæ€§åŒ–å­¦ä¹ å»ºè®® (è–„å¼±ç¯èŠ‚: ${weakest.join('ã€')})`;
                suggestionDiv.appendChild(title);
                
                // ä¸ºæ¯ä¸ªè–„å¼±ç»´åº¦æ·»åŠ å®Œæ•´å»ºè®®
                weakest.forEach(dim => {
                    const suggestion = SUGGESTIONS[dim];
                    
                    const suggestionBlock = document.createElement('div');
                    suggestionBlock.className = 'suggestion-content';
                    
                    const dimTitle = document.createElement('h4');
                    dimTitle.textContent = `${dim}æå‡å»ºè®®ï¼š`;
                    dimTitle.style.color = '#2c3e50';
                    dimTitle.style.marginTop = '15px';
                    dimTitle.style.marginBottom = '10px';
                    
                    const description = document.createElement('p');
                    description.textContent = suggestion.title;
                    description.style.fontStyle = 'italic';
                    description.style.color = '#555';
                    
                    const tipsList = document.createElement('ol');
                    suggestion.tips.forEach(tip => {
                        const li = document.createElement('li');
                        li.textContent = tip;
                        li.style.marginBottom = '12px';
                        tipsList.appendChild(li);
                    });
                    
                    suggestionBlock.appendChild(dimTitle);
                    suggestionBlock.appendChild(description);
                    suggestionBlock.appendChild(tipsList);
                    suggestionDiv.appendChild(suggestionBlock);
                });
            } else {
                // æ²¡æœ‰100%çš„ç»´åº¦ï¼Œä½†ä¹Ÿæ²¡æœ‰æ‰¾åˆ°è–„å¼±ç¯èŠ‚ï¼ˆç†è®ºä¸Šä¸ä¼šå‡ºç°ï¼Œä½†ä¿ç•™å¤„ç†ï¼‰
                suggestionDiv.innerHTML = `
                    <h3>ğŸ‰ ä¼˜ç§€è¡¨ç°ï¼</h3>
                    <div class="suggestion-content">
                        <p>æ‚¨çš„å­©å­åœ¨æ‰€æœ‰ç»´åº¦éƒ½è¾¾åˆ°äº†å¹´çº§å¹³å‡æ°´å¹³ä»¥ä¸Šï¼Œç»§ç»­ä¿æŒï¼ä»¥ä¸‹æ˜¯ä¸€äº›é€šç”¨å»ºè®®ï¼š</p>
                        <ol>
                            ${ALL_PERFECT_SUGGESTIONS.map(tip => `<li>${tip}</li>`).join('')}
                        </ol>
                    </div>
                `;
            }
            
            // æ»šåŠ¨åˆ°ç»“æœåŒºåŸŸ
            document.getElementById('result-section').scrollIntoView({ behavior: 'smooth' });
        }
        
        // åˆ†ææŒ‰é’®ç‚¹å‡»äº‹ä»¶
        function analyze() {
            const scores = calculateScores();
            displayResults(scores);
        }
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.onload = function() {
            initChoiceInputs();
            
            // æ·»åŠ é”®ç›˜äº‹ä»¶æ”¯æŒ
            document.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    analyze();
                }
            });
        };
    </script>
</body>
</html>